<!DOCTYPE html>
<head>
	<title>KONAMI</title>
	<meta charset="utf-8">
	<!-- Bootstrap core CSS -->
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

	<style>
		.showIt {
			display:none;
		}
	</style>
</head>
<body>

	<audio id="sound" preload="auto">
  		<source src="/sounds/EvilYelling.mp3" type="audio/mp3">
	</audio>


	<h1 class="heading text-center">ENTER THE CODE</h1>

	<!-- <button id="reset-code">TRY AGAIN</button> -->

	<div class="container showIt">
		<div class = "row">
			<div class="col-md-6 col-md-offset-3">
				<img src="/img/Dramatic_Chipmunk.gif" height: 100% width 100%>
			</div>
		</div>
	<div>

    
	<!-- jQuery CDN -->
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>

    <!-- Konami Code -->

    <script>
        "use strict";

        var konamiCode = [38,38,40,40,37,37,39,39,66,65,13];
        // var entryTimeMax = 5000;
        // var resetTimer;
        var attemptedCode = [];
        var startChecking = false;

        function resetCode(){
            //reset global variables
        	attemptedCode = [];

            //for debugging
            console.log('code has been reset');

            //reset Easter Egg
            $('.showIt').hide();
            $('body').css('background-color','white');
        }


        function checkCode (attemptedCode, konamiCode){
                if (attemptedCode.length > konamiCode.length){
                    resetCode();
                }
                if (attemptedCode.length !== konamiCode.length) return false;

                for (var i = 0, len = attemptedCode.length; i < len; i++){
                    if (attemptedCode[i] !== konamiCode[i]){
                    return false;
                    }
                }
                return true; 
            }

        function easterEgg (){
            console.log('easter egg');
            $('.showIt').show();
            $('body').css('background-color','black');
            $('#sound')[0].play();
        }

        function logAttempt (event) {
            attemptedCode.push(event.keyCode);
            console.log(attemptedCode);
            console.log(checkCode(attemptedCode,konamiCode));

            
            }

        function konamiCodeSurprise (){
            if (event.which == 38 || attemptedCode[0] == 38){
                logAttempt(event);
                if (checkCode(attemptedCode, konamiCode)){
                    easterEgg();
                    }
                }
            }

        $(document).keyup(konamiCodeSurprise);
        // $(document).keyup(timedReset);

        // $('#reset-code').click(resetCode);


    </script>














    
    <!-- Bootstrap core JavaScript
        ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>